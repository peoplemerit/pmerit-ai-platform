<!-- 
  PMERIT Early Theme Initializer
  
  This script MUST be placed in the <head> section before any CSS or body content
  to prevent flash of unstyled content (FOUC) when dark mode is enabled.
  
  It applies the saved theme preference from localStorage immediately,
  before the page renders, ensuring consistent theme across all pages.
  
  Usage: Inline in <head> section of all pages:
  <head>
    <script>
      (function() {
        var theme = localStorage.getItem('theme');
        if (!theme) {
          theme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>
  </head>
-->
<script>
(function() {
  'use strict';
  
  // Get saved theme preference
  var theme = localStorage.getItem('theme');
  
  // If no saved preference, check system preference
  if (!theme) {
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      theme = 'dark';
    } else {
      theme = 'light';
    }
  }
  
  // Apply theme immediately to prevent flash
  document.documentElement.setAttribute('data-theme', theme);
})();
</script>
