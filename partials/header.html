<!-- Public storefront header (PMERIT) -->
<header class="site-header" role="banner">
  <div class="container max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="/index.html" class="logo flex items-center gap-2" aria-label="Pmerit Home">
      <img src="/assets/img/logo.svg" alt="" width="28" height="28" />
      <span class="text-xl font-semibold">Pmerit</span>
    </a>

    <!-- Desktop actions -->
    <nav class="hidden md:flex items-center gap-2" aria-label="Primary">
      <!-- Left Quick Actions (publicâ€“safe) -->
      <button class="qa-btn" data-action="tts" aria-label="Toggle Text-to-Speech">TTS</button>
      <button class="qa-btn" data-action="vh" aria-label="Toggle Virtual Human">VH</button>
      <button class="qa-btn" data-action="career" aria-label="Open Career Tracks">Tracks</button>
      <button class="qa-btn" data-action="support" aria-label="Open Support">Support</button>
      <button class="qa-btn" data-action="mode" aria-label="Toggle Dark Mode">Theme</button>

      <!-- Right panel CTA (Discover) -->
      <a class="btn btn-secondary" href="/discover.html" aria-label="Discover Your Path (AI)">
        Discover Your Path (AI)
      </a>

      <!-- Single Dashboard button (guest -> sign in modal; authed -> /dashboard.html) -->
      <a id="dashboardCta" class="btn btn-primary" href="/signin.html">Dashboard</a>
    </nav>

    <!-- Mobile menu toggle -->
    <button class="md:hidden" aria-controls="mobileMenu" aria-expanded="false" id="mobileToggle">Menu</button>
  </div>

  <!-- Mobile accordions -->
  <div id="mobileMenu" class="md:hidden border-t">
    <details>
      <summary>Quick Actions</summary>
      <div class="grid grid-cols-2 gap-2 p-3">
        <button class="qa-btn" data-action="tts">TTS</button>
        <button class="qa-btn" data-action="vh">VH</button>
        <button class="qa-btn" data-action="career">Tracks</button>
        <button class="qa-btn" data-action="support">Support</button>
        <button class="qa-btn" data-action="mode">Theme</button>
      </div>
    </details>
    <details>
      <summary>Discover Your Path (AI)</summary>
      <div class="p-3">
        <a class="btn btn-secondary w-full" href="/discover.html">Open Discover</a>
      </div>
    </details>
    <div class="p-3 border-t">
      <a id="dashboardCtaMobile" class="btn btn-primary w-full" href="/signin.html">Dashboard</a>
    </div>
  </div>
</header>

<script>
  // Dashboard CTA swap after auth (public-safe)
  (function () {
    const authed = !!localStorage.getItem('pmerit_auth'); // key name per snapshot
    const d1 = document.getElementById('dashboardCta');
    const d2 = document.getElementById('dashboardCtaMobile');
    if (authed) {
      if (d1) d1.href = '/dashboard.html';
      if (d2) d2.href = '/dashboard.html';
    }
    const t = document.getElementById('mobileToggle');
    const m = document.getElementById('mobileMenu');
    if (t && m) t.addEventListener('click', () => {
      const expanded = t.getAttribute('aria-expanded') === 'true';
      t.setAttribute('aria-expanded', String(!expanded));
      m.hidden = expanded;
    });
  })();
</script>
