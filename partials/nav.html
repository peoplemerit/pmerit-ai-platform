<!-- PMERIT Navigation Sidebar - Sample.jpg Compliant -->
<!-- Clean HTML, follows DRY principle - No embedded CSS/JS -->
<!-- Styles: /assets/base.css | Scripts: /assets/boot-includes.js -->
<!-- Logic: /assets/nav-config.js -->

<nav class="sidebar" role="navigation" aria-label="Main navigation">
  
  <!-- Quick Actions Section -->
  <section class="nav-section">
    <h3 class="nav-section-title">
      <i class="fas fa-bolt" aria-hidden="true"></i>
      Quick Actions
    </h3>
    
    <div class="nav-actions">
      <!-- Virtual Human Mode Toggle -->
      <div class="nav-action-item">
        <div class="action-content">
          <i class="fas fa-user-astronaut action-icon" aria-hidden="true"></i>
          <span class="action-title">Virtual Human Mode</span>
          <span class="action-subtitle">Immersive AI experience</span>
        </div>
        <div class="action-toggle">
          <input type="checkbox" id="vhModeToggle" class="toggle-switch" aria-describedby="vhModeDesc">
          <label for="vhModeToggle" class="toggle-label" aria-hidden="true"></label>
        </div>
      </div>
      <div id="vhModeDesc" class="sr-only">Toggle virtual human mode for immersive learning</div>

      <!-- Career Track & Explore Paths -->
      <button class="nav-action-item action-button" type="button" id="careerPathsBtn">
        <div class="action-content">
          <i class="fas fa-compass action-icon" aria-hidden="true"></i>
          <span class="action-title">Career Track & Explore Paths</span>
          <span class="action-subtitle">Discover career opportunities</span>
        </div>
        <div class="action-indicator">
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </div>
      </button>

      <!-- Customer Service Mode Toggle -->
      <div class="nav-action-item">
        <div class="action-content">
          <i class="fas fa-headset action-icon" aria-hidden="true"></i>
          <span class="action-title">Customer Service Mode</span>
          <span class="action-subtitle">AI support assistance</span>
        </div>
        <div class="action-toggle">
          <input type="checkbox" id="customerServiceToggle" class="toggle-switch" aria-describedby="customerServiceDesc">
          <label for="customerServiceToggle" class="toggle-label" aria-hidden="true"></label>
        </div>
      </div>
      <div id="customerServiceDesc" class="sr-only">Toggle customer service mode for platform support</div>
    </div>
  </section>

  <!-- Settings Section (Collapsible) -->
  <section class="nav-section">
    <button class="nav-section-header collapsible" type="button" aria-expanded="false" aria-controls="settingsContent" id="settingsToggle">
      <h3 class="nav-section-title">
        <i class="fas fa-cog" aria-hidden="true"></i>
        Settings
      </h3>
      <i class="fas fa-chevron-down toggle-icon" aria-hidden="true"></i>
    </button>
    
    <div class="nav-content collapse" id="settingsContent">
      <!-- Dark Mode -->
      <div class="setting-item">
        <div class="setting-content">
          <i class="fas fa-moon setting-icon" aria-hidden="true"></i>
          <span class="setting-title">Dark Mode</span>
        </div>
        <div class="setting-toggle">
          <input type="checkbox" id="darkModeToggle" class="toggle-switch">
          <label for="darkModeToggle" class="toggle-label" aria-hidden="true"></label>
        </div>
      </div>
      
      <!-- Text-to-Speech -->
      <div class="setting-item">
        <div class="setting-content">
          <i class="fas fa-volume-up setting-icon" aria-hidden="true"></i>
          <span class="setting-title">Text-to-Speech</span>
        </div>
        <div class="setting-toggle">
          <input type="checkbox" id="ttsToggle" class="toggle-switch">
          <label for="ttsToggle" class="toggle-label" aria-hidden="true"></label>
        </div>
      </div>

      <!-- Preview Voices -->
      <button class="setting-item setting-button" type="button" id="previewVoicesBtn">
        <div class="setting-content">
          <i class="fas fa-play-circle setting-icon" aria-hidden="true"></i>
          <span class="setting-title">Preview Voices</span>
        </div>
        <div class="setting-indicator">
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </div>
      </button>
    </div>
  </section>

  <!-- Navigation Section -->
  <section class="nav-section">
    <h3 class="nav-section-title">
      <i class="fas fa-compass" aria-hidden="true"></i>
      Navigation
    </h3>
    
    <div class="nav-content">
      <!-- Dashboard Button (Role-based) -->
      <div class="nav-primary-action">
        <!-- For Guest Users -->
        <button class="btn btn-primary guest-only" id="getStartedBtn" type="button" data-action="signup" style="display: block;">
          <i class="fas fa-user-plus" aria-hidden="true"></i>
          Get Started
        </button>
        
        <!-- For Authenticated Users -->
        <button class="btn btn-primary authenticated-only" id="dashboardBtn" type="button" data-action="dashboard" style="display: none;">
          <i class="fas fa-gauge-high" aria-hidden="true"></i>
          Dashboard
        </button>
      </div>

      <!-- About PMERIT Pricing -->
      <div class="nav-secondary-action">
        <button class="nav-link secondary" type="button" id="aboutPricingBtn" data-action="pricing">
          <i class="fas fa-info-circle" aria-hidden="true"></i>
          About PMERIT Pricing
        </button>
      </div>

      <!-- User Navigation Links (Authenticated Only) -->
      <ul class="nav-menu authenticated-only" style="display: none;">
        <li class="nav-item">
          <a href="/courses.html" class="nav-link">
            <i class="fas fa-book-open" aria-hidden="true"></i>
            My Courses
          </a>
        </li>
        <li class="nav-item">
          <a href="/library.html" class="nav-link">
            <i class="fas fa-university" aria-hidden="true"></i>
            Library
          </a>
        </li>
        <li class="nav-item">
          <a href="/career.html" class="nav-link">
            <i class="fas fa-briefcase" aria-hidden="true"></i>
            Career Center
          </a>
        </li>
        <li class="nav-item">
          <a href="/classroom.html" class="nav-link">
            <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i>
            Classroom
          </a>
        </li>
      </ul>
    </div>
  </section>

  <!-- Help & Support Section -->
  <section class="nav-section">
    <h3 class="nav-section-title">
      <i class="fas fa-life-ring" aria-hidden="true"></i>
      Help & Support
    </h3>
    
    <div class="nav-content">
      <button class="nav-link support" type="button" id="helpCenterBtn" data-action="help">
        <i class="fas fa-question-circle" aria-hidden="true"></i>
        Help Center
      </button>

      <button class="nav-link support" type="button" id="sendFeedbackBtn" data-action="feedback">
        <i class="fas fa-comment-alt" aria-hidden="true"></i>
        Send Feedback
      </button>
    </div>
  </section>

  <!-- User Status (Authenticated Only) -->
  <div class="nav-user-status authenticated-only" style="display: none;">
    <div class="user-info">
      <div class="user-avatar">
        <i class="fas fa-user-circle" aria-hidden="true"></i>
      </div>
      <div class="user-details">
        <span class="user-name" id="userName">Student</span>
        <span class="user-plan" id="userPlan">Free Plan</span>
      </div>
    </div>
  </div>

</nav>

<!-- JavaScript for Navigation Functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Settings Collapsible
  const settingsToggle = document.getElementById('settingsToggle');
  const settingsContent = document.getElementById('settingsContent');
  
  if (settingsToggle && settingsContent) {
    settingsToggle.addEventListener('click', function() {
      const isExpanded = this.getAttribute('aria-expanded') === 'true';
      
      this.setAttribute('aria-expanded', !isExpanded);
      settingsContent.classList.toggle('show');
      
      const icon = this.querySelector('.toggle-icon');
      if (icon) {
        icon.style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(180deg)';
      }
    });
  }

  // Dashboard Button Logic
  const getStartedBtn = document.getElementById('getStartedBtn');
  const dashboardBtn = document.getElementById('dashboardBtn');
  
  if (getStartedBtn) {
    getStartedBtn.addEventListener('click', function() {
      // For guest users - show sign-up modal or redirect
      if (window.PMERIT && window.PMERIT.auth) {
        window.PMERIT.auth.showSignUp();
      } else {
        // Fallback: show basic sign-up message
        alert('Please sign up to access your personalized dashboard with courses, career center, and learning progress.');
        window.location.href = '/signup.html';
      }
    });
  }
  
  if (dashboardBtn) {
    dashboardBtn.addEventListener('click', function() {
      // For authenticated users - navigate to dashboard
      window.location.href = '/dashboard.html';
    });
  }

  // Toggle Switches
  document.querySelectorAll('.toggle-switch').forEach(toggle => {
    toggle.addEventListener('change', function() {
      // Store setting in localStorage
      if (this.id) {
        localStorage.setItem(`pmerit_${this.id}`, this.checked);
      }
      
      // Handle specific toggles
      if (this.id === 'darkModeToggle') {
        document.body.classList.toggle('dark-mode', this.checked);
      }
    });
    
    // Load saved state
    if (toggle.id) {
      const saved = localStorage.getItem(`pmerit_${toggle.id}`);
      if (saved !== null) {
        toggle.checked = saved === 'true';
      }
    }
  });

  // Role-based Visibility
  function updateRoleVisibility() {
    const isAuthenticated = localStorage.getItem('pmerit_authenticated') === 'true';
    
    document.querySelectorAll('.guest-only').forEach(el => {
      el.style.display = isAuthenticated ? 'none' : 'block';
    });
    
    document.querySelectorAll('.authenticated-only').forEach(el => {
      el.style.display = isAuthenticated ? 'block' : 'none';
    });
  }
  
  // Initialize role visibility
  updateRoleVisibility();
  
  // Listen for authentication changes
  window.addEventListener('pmerit:authChanged', updateRoleVisibility);
});
</script>
