<!--
  PMERIT Tech Help Modal Component
  Version: 1.1
  Last Updated: October 30, 2025

  Reusable modal for tech help and support requests
  Features: Form submission, category selection, attachment stub, FAQ search, accessibility

  Usage: Include this partial and call TechHelpModal.open()
-->

<div id="tech-help-modal" class="tech-help-modal" role="dialog" aria-modal="true" aria-labelledby="tech-help-modal-title" aria-hidden="true">
  <div class="tech-help-modal-backdrop">
    <div class="tech-help-modal-content">
      <!-- Close Button -->
      <button class="tech-help-modal-close" aria-label="Close modal">
        <i class="fas fa-times"></i>
      </button>

      <!-- Modal Header -->
      <div class="tech-help-modal-header">
        <h2 id="tech-help-modal-title" class="tech-help-modal-title">
          <i class="fas fa-life-ring"></i> Tech Help
        </h2>
        <p class="tech-help-modal-subtitle">Describe your issue and we'll help you resolve it</p>
        
        <!-- Tab Navigation -->
        <div class="tech-help-tabs" role="tablist">
          <button class="tech-help-tab active" role="tab" aria-selected="true" aria-controls="help-form-panel" id="help-form-tab">
            <i class="fas fa-paper-plane"></i> Submit Request
          </button>
          <button class="tech-help-tab" role="tab" aria-selected="false" aria-controls="help-faq-panel" id="help-faq-tab">
            <i class="fas fa-lightbulb"></i> Common Fixes
          </button>
        </div>
      </div>

      <!-- Modal Body -->
      <div class="tech-help-modal-body">
        <!-- Success/Error Messages -->
        <div id="tech-help-message" class="tech-help-modal-message" role="alert" aria-live="polite"></div>

        <!-- Form Panel -->
        <div id="help-form-panel" class="tech-help-panel active" role="tabpanel" aria-labelledby="help-form-tab">
          <form id="tech-help-form" class="tech-help-modal-form">
          <!-- Description Field -->
          <div class="form-group">
            <label for="tech-help-description">What's the issue?</label>
            <textarea
              id="tech-help-description"
              name="description"
              placeholder="Describe the problem you're experiencing..."
              rows="5"
              maxlength="1000"
              required
              aria-required="true"
              aria-describedby="description-hint"></textarea>
            <small id="description-hint" class="form-hint">Be as specific as possible (max 1000 characters)</small>
          </div>

          <!-- Category Dropdown -->
          <div class="form-group">
            <label for="tech-help-category">Category</label>
            <select
              id="tech-help-category"
              name="category"
              required
              aria-required="true">
              <option value="">Select a category</option>
              <option value="account">Account & Sign In</option>
              <option value="courses">Courses & Content</option>
              <option value="technical">Technical Issues</option>
              <option value="payment">Payment & Billing</option>
              <option value="accessibility">Accessibility</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- Attachment Button (Non-functional stub) -->
          <div class="form-group">
            <label>Attachments</label>
            <button type="button" class="attachment-btn" id="tech-help-attachment" aria-label="Add attachment (coming soon)" disabled>
              <i class="fas fa-paperclip"></i>
              <span>Add Attachment</span>
              <span class="badge-soon">Coming Soon</span>
            </button>
            <small class="form-hint">Screenshots and files (feature coming soon)</small>
          </div>

            <!-- Action Buttons -->
            <div class="tech-help-modal-actions">
              <button type="submit" class="tech-help-modal-button primary">
                <i class="fas fa-paper-plane"></i> Send
              </button>
            </div>
          </form>
        </div>

        <!-- FAQ Panel -->
        <div id="help-faq-panel" class="tech-help-panel" role="tabpanel" aria-labelledby="help-faq-tab" hidden>
          <!-- FAQ Search -->
          <div class="faq-search-container">
            <label for="faq-search" class="sr-only">Search common issues</label>
            <div class="faq-search-wrapper">
              <i class="fas fa-search"></i>
              <input 
                type="search" 
                id="faq-search" 
                placeholder="Search for solutions..."
                aria-describedby="faq-search-hint"
              />
            </div>
            <small id="faq-search-hint" class="form-hint">Try searching for "password", "video", or "certificate"</small>
          </div>

          <!-- FAQ Results -->
          <div id="faq-results" class="faq-results" role="region" aria-live="polite" aria-label="Search results">
            <!-- Results will be populated by JavaScript -->
          </div>

          <!-- FAQ Detail View -->
          <div id="faq-detail" class="faq-detail" hidden>
            <button class="faq-back-btn" id="faq-back-btn" aria-label="Back to results">
              <i class="fas fa-arrow-left"></i> Back to results
            </button>
            <div id="faq-detail-content" class="faq-detail-content">
              <!-- Detail content will be populated by JavaScript -->
            </div>
            <div class="faq-detail-actions">
              <p class="faq-help-text">Still need help?</p>
              <button class="tech-help-modal-button secondary" id="faq-contact-support">
                <i class="fas fa-paper-plane"></i> Contact Support
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
