<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PMERIT â€“ Accessible Global Education</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

  <!-- Modular CSS -->
  <link rel="stylesheet" href="assets/css/core.css">
  <link rel="stylesheet" href="assets/css/layout.css">
  <link rel="stylesheet" href="assets/css/components.css">

  <!-- Module Loading System -->
  <script type="module">
    // PMERIT Module Loader - Phase 1
    console.log('ðŸš€ PMERIT Modular Frontend - Phase 1 Loading...');
    
    // Import core modules
    import { StateManager } from './assets/js/core/state.js';
    import { Utils } from './assets/js/core/utils.js';
    import { I18n } from './assets/js/core/i18n.js';
    
    // Import components (will be loaded in phases)
    // import { Header } from './assets/js/components/header.js';
    // import { SidebarLeft } from './assets/js/components/sidebar-left.js';
    // import { Chat } from './assets/js/components/chat.js';
    // import { SidebarRight } from './assets/js/components/sidebar-right.js';
    // import { Footer } from './assets/js/components/footer.js';
    
    // Global PMERIT app
    window.PMERIT = {
      state: null,
      utils: null,
      i18n: null,
      components: {},
      modules: {},
      init: async function() {
        console.log('ðŸ”§ Initializing PMERIT Core Systems...');
        
        // Initialize core systems
        this.state = new StateManager();
        this.utils = new Utils();
        this.i18n = new I18n();
        
        // Phase 1: Just initialize state and styling
        await this.state.init();
        this.i18n.init(this.state.get('lang', 'en'));
        
        console.log('âœ… Phase 1 Complete - Core Foundation Ready');
        console.log('ðŸ“Š State:', this.state.getAll());
        
        // Apply initial theme
        document.body.classList.toggle('dark', this.state.get('dark', false));
        
        // Phase 2+ will load components here
        this.loadPhase2();
      },
      
      loadPhase2: function() {
        console.log('ðŸ“‹ Phase 2: Static Components (coming next...)');
        // This is where we'll load header, sidebars, etc.
      }
    };
    
    // Auto-initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => window.PMERIT.init());
    } else {
      window.PMERIT.init();
    }
  </script>
</head>
<body>
  <!-- Phase 1: Static HTML structure (no JavaScript functionality yet) -->
  
  <!-- Header -->
  <header>
    <div class="logo">P<span>MERIT</span></div>
    <nav>
      <select id="lang" aria-label="Language">
        <option value="en">English</option>
        <option value="yo">YorÃ¹bÃ¡</option>
        <option value="ig">Igbo</option>
        <option value="ha">Hausa</option>
      </select>
      <button class="btn" id="donateBtn">Donate</button>
      <button class="btn" id="signInBtn">Sign In</button>
      <button class="btn primary" id="startBtn">Start Learning</button>
    </nav>
  </header>

  <div class="estate">
    <!-- Left Pane -->
    <aside id="left" aria-label="Quick actions sidebar">
      <section>
        <div class="pane-title">Quick Actions</div>

        <button class="toggle" id="vhToggle">
          <span><i class="fas fa-user icon"></i> <span>Virtual Human Mode</span></span>
          <span class="switch" aria-hidden="true"></span>
        </button>

        <button class="action" id="careerPaths">
          <span><i class="fas fa-compass icon"></i> <span>Career Track & Explore Paths</span></span>
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>

        <button class="toggle" id="supportToggle">
          <span><i class="fas fa-headset icon"></i> <span>Customer Service Mode</span></span>
          <span class="switch" aria-hidden="true"></span>
        </button>

        <div class="collapsible" id="settingsBox">
          <div class="head">
            <strong><i class="fas fa-sliders-h"></i> Settings</strong>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="body">
            <button class="toggle" id="darkToggle">
              <span><i class="fas fa-moon icon"></i> Dark Mode</span>
              <span class="switch" aria-hidden="true"></span>
            </button>
            <button class="toggle" id="ttsToggle">
              <span><i class="fas fa-volume-up icon"></i> Text-to-Speech</span>
              <span class="switch" aria-hidden="true"></span>
            </button>
            <button class="action" id="voicesBtn">
              <span><i class="fas fa-headphones icon"></i> Preview Voices</span>
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>

        <button class="dashboard guest" id="dashBtn">
          <i class="fas fa-gauge-high"></i>&nbsp;Dashboard
        </button>

        <div class="avatar" id="vhAvatar" title="Virtual Human">
          <i class="fas fa-user-circle" aria-hidden="true"></i>
        </div>
      </section>
    </aside>

    <!-- Center -->
    <main>
      <section id="page2" class="panel" aria-label="Chat panel">
        <div class="panel-head">
          <div class="badges">
            <span class="badge vh" id="vhBadge" style="display:none">
              <i class="fas fa-user-astronaut"></i> Virtual Human
            </span>
            <span class="badge support" id="supportBadge" style="display:none">
              <i class="fas fa-headset"></i> Support Assistant
            </span>
          </div>
        </div>

        <div id="textChat" role="region" aria-live="polite">
          <div class="chat-body" id="chatBody">
            <article class="bubble" id="welcomeMsg">
              <div class="ava"><i class="fas fa-user-circle"></i></div>
              <div>
                <h3>PMERIT AI:</h3>
                <p id="welcomeCopy">Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?</p>
              </div>
            </article>
          </div>
          <div class="chat-input">
            <textarea id="chatInput" maxlength="1000" placeholder="Ask about courses, learning paths, or your goals..." aria-label="Message"></textarea>
            <div class="input-bar">
              <span class="count" id="count">0/1000</span>
              <div style="display:flex;gap:.5rem;align-items:center">
                <button class="btn ghost" id="vhQuick">
                  <i class="fas fa-user-astronaut"></i> VH Mode
                </button>
                <button class="btn ghost" id="readAbout">
                  <i class="fas fa-book"></i> Read
                </button>
                <span class="footer-status" id="status">
                  <i class="fas fa-circle-check"></i> Connected to Educational Services
                </span>
              </div>
              <button class="send" id="sendBtn">Send <i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </div>

        <!-- Virtual Human stage -->
        <div id="vhStage" class="hidden" role="region" aria-live="polite">
          <div class="stage">
            <div class="human-frame">
              <div class="human-face"><i class="fas fa-user-circle"></i></div>
            </div>
          </div>
          <div class="captions" id="captions">Virtual Human is speakingâ€¦</div>
        </div>
      </section>

      <!-- Mobile accordions -->
      <div id="mobileAccordions" aria-label="Mobile quick sections">
        <details>
          <summary><strong><i class="fas fa-bolt"></i> Quick Actions</strong></summary>
          <div style="display:grid;gap:.6rem;margin:.75rem 0">
            <button class="toggle" id="m_vhToggle">
              <span><i class="fas fa-user icon"></i> Virtual Human Mode</span>
              <span class="switch"></span>
            </button>
            <button class="action" id="m_careerPaths">
              <span><i class="fas fa-compass icon"></i> Career Track & Explore Paths</span>
              <i class="fas fa-chevron-right"></i>
            </button>
            <button class="toggle" id="m_supportToggle">
              <span><i class="fas fa-headset icon"></i> Customer Service Mode</span>
              <span class="switch"></span>
            </button>
            <button class="dashboard guest" id="m_dashBtn">
              <i class="fas fa-gauge-high"></i>&nbsp;Dashboard
            </button>
          </div>
        </details>

        <details style="margin-top:.6rem">
          <summary><strong><i class="fas fa-compass"></i> Discover Your Path (AI)</strong></summary>
          <div style="margin:.75rem 0">
            <div class="discover">
              <h4>Personalized learning plan</h4>
              <p>Start a short flow that blends learning style, interests, and skills into a plan.</p>
              <button class="btn primary" id="m_beginAssessment">Begin Assessment</button>
              <div class="insights" id="m_insights"></div>
            </div>
          </div>
        </details>
      </div>
    </main>

    <!-- Right Pane -->
    <aside id="right" aria-label="Support and discover sidebar">
      <section>
        <div class="support-assistant" id="supportBox">
          <h4><i class="fas fa-headset"></i> Support Assistant</h4>
          <p class="muted">Ask me about PMERIT</p>
          <div style="display:flex;gap:.5rem;justify-content:center;margin-top:.5rem">
            <button class="btn ghost" style="border-color:var(--accent)" id="vhShort">
              <i class="fas fa-user-astronaut"></i> Virtual Human
            </button>
            <button class="btn ghost" style="border-color:var(--ok)" id="supportShort">
              <i class="fas fa-headset"></i> Support
            </button>
          </div>
        </div>

        <h3>Discover Your Path (AI)</h3>
        <div class="discover">
          <h4>Personalized learning plan</h4>
          <p>Start a short flow that blends learning style, interests, and skills into a plan.</p>
          <button class="btn primary" id="beginAssessment">Begin Assessment</button>
          <div class="insights" id="insights"></div>
        </div>
      </section>
    </aside>
  </div>

  <!-- Footer -->
  <footer>
    <span class="footer-status">
      <i class="fas fa-signal"></i> Connected to Educational Services
    </span>
    <div class="footer-links">
      <a class="btn ghost" href="#privacy">Privacy & Terms</a>
      <a class="btn ghost" href="#contact">Contact</a>
      <a class="btn ghost" href="#partners">Partnerships</a>
      <a class="btn ghost" href="#support">Support</a>
    </div>
  </footer>

  <!-- Phase 1: No modals yet, those come in Phase 3 -->
  
  <!-- Development Tools (remove in production) -->
  <script>
    // Phase 1 Development Helper
    console.log('ðŸ“‹ PMERIT Phase 1 Status:');
    console.log('âœ… HTML structure loaded');
    console.log('âœ… CSS modules loaded');
    console.log('âœ… Module loader ready');
    console.log('â³ JavaScript functionality: Phase 2+');
    console.log('â³ Database integration: Phase 4+');
    
    // Visual verification
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ðŸŽ¨ Visual elements found:');
      console.log('- Header:', !!document.querySelector('header'));
      console.log('- Left sidebar:', !!document.querySelector('#left'));
      console.log('- Main chat:', !!document.querySelector('main'));
      console.log('- Right sidebar:', !!document.querySelector('#right'));
      console.log('- Footer:', !!document.querySelector('footer'));
      
      // Check responsive behavior
      const estate = document.querySelector('.estate');
      console.log('ðŸ“± Grid layout:', getComputedStyle(estate).gridTemplateColumns);
    });
  </script>
</body>
</html>
