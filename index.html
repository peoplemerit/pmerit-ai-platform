<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PMERIT ‚Äì Empowering Learning Through Innovation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

  <!-- Modular CSS -->
  <link rel="stylesheet" href="assets/css/core.css">
  <link rel="stylesheet" href="assets/css/layout.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/assessment.css">

  <style>
    /* Your existing beautiful design styles remain here */
    :root {
      --brand: #4F46E5;
      --accent: #7C3AED;
      --ok: #10B981;
      --warning: #F59E0B;
      --ink: #1F2937;
      --muted: #6B7280;
      --bg: #F9FAFB;
      --card: #FFFFFF;
      --border: #E5E7EB;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --trans: all 0.2s ease-in-out;
      --header-h: 80px;
      --footer-h: 60px;
    }

    .dark {
      --ink: #F9FAFB;
      --muted: #9CA3AF;
      --bg: #111827;
      --card: #1F2937;
      --border: #374151;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: var(--ink);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Header */
    header {
      height: var(--header-h);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      position: relative;
      z-index: 10;
    }

    .logo {
      font-weight: 800;
      font-size: 1.5rem;
      color: var(--brand);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo::before {
      content: "üéì";
      font-size: 1.2rem;
    }

    .header-center {
      flex: 1;
      text-align: center;
      max-width: 600px;
      margin: 0 2rem;
    }

    .header-center h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 0.25rem;
    }

    .header-center p {
      font-size: 0.9rem;
      color: var(--muted);
    }

    nav {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    select, .btn {
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--ink);
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--trans);
      font-size: 0.875rem;
    }

    .btn:hover, select:hover {
      border-color: var(--brand);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .btn.primary {
      background: var(--brand);
      color: white;
      border-color: var(--brand);
      font-weight: 600;
    }

    .btn.primary:hover {
      background: #4338CA;
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
    }

    .btn.accent {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Continue with your existing styles for estate, panels, etc. */
    .estate {
      flex: 1;
      display: grid;
      grid-template-columns: 280px 1fr 380px;
      gap: 1.5rem;
      padding: 2rem;
      height: calc(100vh - var(--header-h) - var(--footer-h));
      overflow: hidden;
    }

    .panel {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* All your existing component styles... */
    .left-panel {
      padding: 1.5rem;
    }

    .panel-title {
      font-weight: 700;
      color: var(--brand);
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }

    .action-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      margin-bottom: 0.75rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 0.75rem;
      cursor: pointer;
      transition: var(--trans);
      text-decoration: none;
      color: inherit;
    }

    .action-item:hover {
      border-color: var(--brand);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .action-item i {
      color: var(--brand);
      width: 20px;
    }

    .toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      margin-bottom: 0.75rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 0.75rem;
      cursor: pointer;
      transition: var(--trans);
    }

    .toggle:hover {
      border-color: var(--brand);
    }

    .toggle-switch {
      width: 44px;
      height: 24px;
      background: #D1D5DB;
      border-radius: 12px;
      position: relative;
      transition: var(--trans);
    }

    .toggle-switch::after {
      content: "";
      position: absolute;
      left: 2px;
      top: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: var(--trans);
    }

    .toggle.active .toggle-switch {
      background: var(--brand);
    }

    .toggle.active .toggle-switch::after {
      left: 22px;
    }

    .dashboard-btn {
      background: var(--brand);
      color: white;
      font-weight: 700;
      justify-content: center;
      margin-top: 1rem;
    }

    .dashboard-btn:hover {
      background: #4338CA;
      transform: translateY(-1px);
    }

    /* Continue with all your existing styles... */

    /* Footer */
    footer {
      height: var(--footer-h);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      padding: 0 2rem;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
    }

    .footer-links a {
      color: var(--muted);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.875rem;
      transition: var(--trans);
    }

    .footer-links a:hover {
      color: var(--brand);
    }

    /* Responsive and Dark mode styles... */
    @media (max-width: 1200px) {
      .estate {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 1rem;
        overflow-y: auto;
        height: auto;
      }
    }
  </style>
</head>
<body>
  <!-- Your existing beautiful HTML structure -->
  <header>
    <div class="logo">PMERIT</div>
    <div class="header-center">
      <h1>Empowering Learning Through Innovation</h1>
      <p>Accessible, high-quality education for global opportunities</p>
    </div>
    <nav>
      <select id="lang" aria-label="Language">
        <option value="en">üåê English</option>
        <option value="yo">Yor√πb√°</option>
        <option value="ig">Igbo</option>
        <option value="ha">Hausa</option>
      </select>
      <button class="btn accent" id="donateBtn">üî• Pricing</button>
      <button class="btn" id="signInBtn">Sign In</button>
      <button class="btn primary" id="startBtn">Start Learning</button>
    </nav>
  </header>

  <div class="estate">
    <!-- Left Panel -->
    <aside class="panel left-panel" id="leftPanel">
      <div class="panel-title">Quick Actions</div>

      <div class="toggle" id="vhToggle">
        <div class="action-content">
          <i class="fas fa-user"></i>
          <span>Virtual Human Mode</span>
        </div>
        <div class="toggle-switch"></div>
      </div>

      <a href="#" class="action-item" id="careerPaths">
        <i class="fas fa-compass"></i>
        <div>Career Track & Explore Paths</div>
        <i class="fas fa-chevron-right"></i>
      </a>

      <div class="toggle" id="supportToggle">
        <div class="action-content">
          <i class="fas fa-headset"></i>
          <span>Customer Service Mode</span>
        </div>
        <div class="toggle-switch"></div>
      </div>

      <div class="collapsible" id="settingsCollapsible">
        <div class="collapsible-header">
          <div>
            <i class="fas fa-sliders-h"></i>
            <span style="margin-left: 0.5rem;">Settings</span>
          </div>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="collapsible-body">
          <div class="toggle" id="darkToggle">
            <div class="action-content">
              <i class="fas fa-moon"></i>
              <span>Dark Mode</span>
            </div>
            <div class="toggle-switch"></div>
          </div>
          
          <div class="toggle" id="ttsToggle">
            <div class="action-content">
              <i class="fas fa-volume-up"></i>
              <span>Text-to-Speech</span>
            </div>
            <div class="toggle-switch"></div>
          </div>
        </div>
      </div>

      <button class="action-item dashboard-btn" id="dashboardBtn">
        <i class="fas fa-gauge-high"></i>
        <span>Dashboard</span>
      </button>
    </aside>

    <!-- Center Panel -->
    <main class="panel center-panel" id="centerPanel">
      <div class="chat-header">
        <div class="badges">
          <span class="badge vh" id="vhBadge" style="display:none;">
            <i class="fas fa-user-astronaut"></i>
            <span>Virtual Human</span>
          </span>
          <span class="badge support" id="supportBadge" style="display:none;">
            <i class="fas fa-headset"></i>
            <span>Support Assistant</span>
          </span>
        </div>
      </div>

      <div class="chat-area" id="textChat">
        <div class="chat-messages" id="chatMessages">
          <div class="message">
            <div class="message-avatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="message-content">
              <h3>Gabriel AI:</h3>
              <p>Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?</p>
            </div>
          </div>
        </div>
        
        <div class="chat-input">
          <textarea id="chatTextarea" placeholder="Ask about courses, learning paths, or your goals..." maxlength="1000"></textarea>
          <div class="input-controls">
            <span class="char-count" id="charCount">0/1000</span>
            <div class="control-buttons">
              <button class="btn ghost" id="vhModeBtn">
                <i class="fas fa-user-astronaut"></i>
                <span>Virtual Human Mode</span>
              </button>
              <button class="btn ghost" id="readAboutBtn">
                <i class="fas fa-book"></i>
                <span>Read About</span>
              </button>
              <div class="status-indicator" style="display: flex; align-items: center; gap: 0.5rem; color: var(--ok); font-size: 0.875rem; font-weight: 500;">
                <i class="fas fa-circle-check"></i>
                <span>Connected to Educational Services</span>
              </div>
              <button class="btn primary" id="sendBtn">
                <span>Send</span>
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Panel -->
    <aside class="panel right-panel" id="rightPanel">
      <div style="padding: 1.5rem;">
        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 1rem; padding: 1.5rem; text-align: center; margin-bottom: 2rem;">
          <h4 style="color: var(--ok); margin-bottom: 0.5rem; font-weight: 600;">
            <i class="fas fa-headset"></i> Support Assistant
          </h4>
          <p style="color: var(--muted); margin-bottom: 1rem;">Ask me about PMERIT</p>
          <div style="display: flex; gap: 0.5rem; justify-content: center;">
            <button class="btn ghost" style="border-color: var(--accent);">
              <i class="fas fa-user-astronaut"></i>
              <span>Virtual Human</span>
            </button>
            <button class="btn ghost" style="border-color: var(--ok);">
              <i class="fas fa-headset"></i>
              <span>Support</span>
            </button>
          </div>
        </div>

        <h3 style="font-weight: 700; color: var(--ink); margin-bottom: 1.5rem; font-size: 1.1rem; position: relative; padding-bottom: 0.5rem;">
          Discover Your Path (AI)
        </h3>
        <h3 style="font-weight: 700; color: var(--ink); margin-bottom: 1.5rem; font-size: 1.1rem; position: relative; padding-bottom: 0.5rem;">
          <style>
            h3:last-of-type::after {
              content: "";
              position: absolute;
              bottom: 0;
              left: 0;
              width: 40px;
              height: 3px;
              background: var(--brand);
              border-radius: 2px;
            }
          </style>
        </h3>
        
        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 1rem; padding: 1.5rem; box-shadow: var(--shadow);">
          <h4 style="font-weight: 600; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
            <i class="fas fa-brain" style="color: var(--accent);"></i>
            Personalized learning plan
          </h4>
          <p style="color: var(--muted); margin-bottom: 1.5rem; line-height: 1.5;">Start a short flow that blends learning style, interests, and skills into a plan.</p>
          <button class="btn primary" id="beginAssessment" style="width: 100%; background: var(--brand); color: white; border: none; padding: 0.75rem; border-radius: 0.75rem; font-weight: 600; cursor: pointer; transition: var(--trans); margin-bottom: 1rem;">
            Begin Assessment ‚Üí
          </button>
          <div style="border-top: 1px dashed var(--border); padding-top: 1rem; color: var(--muted); font-size: 0.875rem; line-height: 1.4;">
            <strong>Pro tip:</strong> Keep notes in your own words for better recall.
          </div>
        </div>
      </div>
    </aside>
  </div>

  <footer>
    <div class="status-indicator" style="display: flex; align-items: center; gap: 0.5rem; color: var(--ok); font-size: 0.875rem; font-weight: 500;">
      <i class="fas fa-signal"></i>
      <span>Connected to Educational Services</span>
    </div>
    <div class="footer-links">
      <a href="#privacy">Privacy & Terms</a>
      <a href="#contact">Contact</a>
      <a href="#partnerships">Partnerships</a>
      <a href="#support">Support</a>
    </div>
  </footer>

  <!-- Modular JavaScript -->
  <script type="module">
    // Import core modules
    import { StateManager } from './assets/js/core/state.js';
    import { Utils } from './assets/js/core/utils.js';
    import { I18n } from './assets/js/core/i18n.js';
    
    // Import feature modules
    import { AssessmentSystem } from './assets/js/features/assessment.js';

    // Initialize PMERIT application
    class PMERITApp {
      constructor() {
        this.state = null;
        this.utils = null;
        this.i18n = null;
        this.assessment = null;
      }

      async init() {
        console.log('üöÄ PMERIT Modular Platform Loading...');
        
        // Initialize core systems
        this.state = new StateManager();
        this.utils = new Utils();
        this.i18n = new I18n();
        
        await this.state.init();
        this.i18n.init(this.state.get('lang', 'en'));
        
        // Initialize feature modules
        this.assessment = new AssessmentSystem(this.utils, this.state, this.i18n);
        
        // Set up basic interactions
        this.setupBasicInteractions();
        
        // Apply saved preferences
        this.applySavedPreferences();
        
        console.log('‚úÖ PMERIT Platform Ready');
        console.log('üìä State:', this.state.getAll());
      }

      setupBasicInteractions() {
        // Character counter
        const textarea = document.getElementById('chatTextarea');
        const charCount = document.getElementById('charCount');
        
        if (textarea && charCount) {
          textarea.addEventListener('input', function() {
            charCount.textContent = `${this.value.length}/1000`;
          });
        }

        // Settings collapsible
        const settingsCollapsible = document.getElementById('settingsCollapsible');
        if (settingsCollapsible) {
          const settingsHeader = settingsCollapsible.querySelector('.collapsible-header');
          
          settingsHeader.addEventListener('click', function() {
            settingsCollapsible.classList.toggle('open');
            const icon = this.querySelector('.fas');
            if (settingsCollapsible.classList.contains('open')) {
              settingsCollapsible.querySelector('.collapsible-body').style.display = 'block';
              icon.className = 'fas fa-chevron-up';
            } else {
              settingsCollapsible.querySelector('.collapsible-body').style.display = 'none';
              icon.className = 'fas fa-chevron-down';
            }
          });
        }

        // Dark mode toggle
        const darkToggle = document.getElementById('darkToggle');
        if (darkToggle) {
          darkToggle.addEventListener('click', () => {
            const isDark = !this.state.get('dark', false);
            this.state.setDark(isDark);
            darkToggle.classList.toggle('active', isDark);
          });
        }

        // Virtual Human toggle
        const vhToggle = document.getElementById('vhToggle');
        if (vhToggle) {
          vhToggle.addEventListener('click', () => {
            const isActive = !vhToggle.classList.contains('active');
            vhToggle.classList.toggle('active', isActive);
            this.state.setVH(isActive);
          });
        }

        // Support toggle
        const supportToggle = document.getElementById('supportToggle');
        if (supportToggle) {
          supportToggle.addEventListener('click', () => {
            const isActive = !supportToggle.classList.contains('active');
            supportToggle.classList.toggle('active', isActive);
            this.state.setSupport(isActive);
          });
        }

        // Language selector
        const langSelect = document.getElementById('lang');
        if (langSelect) {
          langSelect.addEventListener('change', (e) => {
            this.i18n.setLanguage(e.target.value);
            this.state.setLanguage(e.target.value);
          });
        }
      }

      applySavedPreferences() {
        // Apply dark mode
        if (this.state.get('dark', false)) {
          document.body.classList.add('dark');
          const darkToggle = document.getElementById('darkToggle');
          if (darkToggle) darkToggle.classList.add('active');
        }

        // Apply language
        const langSelect = document.getElementById('lang');
        if (langSelect) {
          langSelect.value = this.state.get('lang', 'en');
        }
      }
    }

    // Global PMERIT object
    window.PMERIT = new PMERITApp();

    // Make assessment methods globally available for onclick handlers
    window.PMERIT.assessment = {
      nextQuestion: () => window.PMERIT.assessment?.nextQuestion(),
      previousQuestion: () => window.PMERIT.assessment?.previousQuestion(),
      closeModal: () => window.PMERIT.assessment?.closeModal(),
      startLearningPath: () => window.PMERIT.assessment?.startLearningPath(),
      retakeAssessment: () => window.PMERIT.assessment?.retakeAssessment()
    };

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => window.PMERIT.init());
    } else {
      window.PMERIT.init();
    }
  </script>
</body>
</html>
