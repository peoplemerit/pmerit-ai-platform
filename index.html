<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PMERIT â€” Accessible Global Education</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

  <style>
    :root {
      /* PMERIT Brand Colors - Clean White Theme */
      --primary: #4F46E5;       /* PMERIT brand blue */
      --primary-dark: #3730A3;
      --accent: #7C3AED;        /* Purple accent */
      --success: #10B981;       /* Success green */
      --text-primary: #1E293B;  /* Dark slate text */
      --text-secondary: #64748B;/* Gray text */
      --text-inverse: #F8FAFC;  /* Light text for dark backgrounds */
      --bg-primary: #FFFFFF;    /* Clean white background */
      --bg-secondary: #F8FAFC;  /* Light gray background */
      --bg-dark: #1E293B;       /* Dark background for contrast */
      --card-bg: #FFFFFF;       /* Card background */
      --border-color: #E2E8F0;  /* Border color */
      --header-height: 70px;
      --footer-height: 60px;
      --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --transition: all 0.2s ease-in-out;
    }

    .dark {
      --text-primary: #F8FAFC;
      --text-secondary: #CBD5E1;
      --bg-primary: #0F172A;
      --bg-secondary: #1E293B;
      --card-bg: #1E293B;
      --border-color: #334155;
      --shadow: 0 8px 28px rgba(0,0,0,.45);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      transition: var(--transition);
    }

    body {
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Header Styles */
    header {
      height: var(--header-height);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      background-color: var(--card-bg);
      border-bottom: 1px solid var(--border-color);
      box-shadow: var(--shadow);
      z-index: 50;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo::before {
      content: "ðŸŽ“";
      font-size: 1.5rem;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .nav-btn, select {
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-weight: 500;
      font-size: 0.9rem;
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid var(--border-color);
      background-color: var(--card-bg);
      color: var(--text-primary);
      min-height: 44px;
    }

    .nav-btn:hover, select:hover {
      border-color: var(--primary);
      transform: translateY(-1px);
    }

    .nav-btn.primary {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .nav-btn.primary:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    /* Main Layout - 3 Column Grid */
    .estate {
      display: grid;
      grid-template-columns: 280px 1fr 320px;
      height: calc(100vh - var(--header-height) - var(--footer-height));
      overflow: hidden;
      gap: 0;
    }

    /* Left Pane Styles */
    #left {
      background-color: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      padding: 1.5rem 1rem;
      overflow-y: auto;
    }

    .pane-title {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--primary);
      margin-bottom: 1rem;
    }

    .toggle, .action, .dashboard {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: var(--transition);
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      min-height: 44px;
    }

    .toggle:hover, .action:hover, .dashboard:hover {
      border-color: var(--primary);
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .icon {
      color: var(--primary);
      margin-right: 0.5rem;
    }

    .switch {
      width: 40px;
      height: 20px;
      background: #ccc;
      border-radius: 34px;
      position: relative;
      transition: .4s;
    }

    .switch::after {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    .toggle.active .switch {
      background-color: var(--primary);
    }

    .toggle.active .switch::after {
      transform: translateX(20px);
    }

    .dashboard {
      justify-content: center;
      font-weight: 600;
      background-color: var(--primary);
      color: white;
      box-shadow: var(--shadow-lg);
    }

    .dashboard.guest {
      background-color: var(--text-secondary);
    }

    .dashboard:hover {
      background-color: var(--primary-dark);
    }

    .dashboard.guest:hover {
      background-color: #475569;
    }

    /* Center Chat Area Styles */
    main {
      background-color: var(--bg-primary);
      overflow: hidden;
    }

    .panel {
      height: 100%;
      display: flex;
      flex-direction: column;
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      margin: 1rem;
      box-shadow: var(--shadow-lg);
      overflow: hidden;
    }

    .panel-head {
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
      background-color: var(--bg-secondary);
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .badges {
      display: flex;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .badge {
      background-color: var(--primary);
      color: white;
      font-size: 0.78rem;
      padding: 0.28rem 0.6rem;
      border-radius: 999px;
      display: inline-flex;
      gap: 0.35rem;
      align-items: center;
    }

    .badge.support {
      background-color: var(--success);
    }

    .badge.vh {
      background-color: var(--accent);
    }

    #textChat {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .chat-body {
      flex: 1;
      padding: 1rem;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
    }

    .bubble {
      display: flex;
      gap: 0.65rem;
      align-items: flex-start;
      background-color: rgba(79, 70, 229, 0.06);
      border: 1px solid rgba(79, 70, 229, 0.18);
      border-radius: 0.75rem;
      padding: 1rem;
    }

    .ava {
      min-width: 36px;
      height: 36px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      color: white;
      background: linear-gradient(135deg, var(--primary), var(--accent));
    }

    .bubble h3 {
      margin: 0.1rem 0 0.35rem;
      color: var(--primary);
      font-size: 1rem;
    }

    .bubble p {
      margin: 0.3rem 0;
      line-height: 1.55;
    }
    
    /* Chat Input Area Styles */
    .chat-input-area {
      border-top: 1px solid var(--border-color);
      background-color: var(--bg-secondary);
      padding: 1rem;
    }

    .input-wrapper {
      display: flex;
      gap: 0.75rem;
      align-items: flex-end;
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 0.75rem;
      transition: var(--transition);
    }

    .input-wrapper:focus-within {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    #chatInput {
      flex: 1;
      border: none;
      outline: none;
      resize: none;
      font-family: inherit;
      font-size: 0.9rem;
      line-height: 1.5;
      background: transparent;
      color: var(--text-primary);
      min-height: 20px;
      max-height: 120px;
    }

    #chatInput::placeholder {
      color: var(--text-secondary);
    }

    .send-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.5rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 36px;
      height: 36px;
    }

    .send-btn:hover:not(:disabled) {
      background-color: var(--primary-dark);
      transform: translateY(-1px);
    }

    .send-btn:disabled {
      background-color: var(--text-secondary);
      cursor: not-allowed;
      transform: none;
    }

    .input-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
      font-size: 0.8rem;
    }

    .char-count {
      color: var(--text-secondary);
    }

    .mode-indicators {
      display: flex;
      gap: 0.5rem;
    }

    .mode-btn {
      background: none;
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 0.25rem 0.75rem;
      color: var(--text-secondary);
      font-size: 0.8rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .mode-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background-color: rgba(79, 70, 229, 0.05);
    }

    .mode-btn.active {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* Right Pane Styles */
    #right {
      background-color: var(--bg-secondary);
      border-left: 1px solid var(--border-color);
      padding: 1.5rem;
      overflow-y: auto;
    }

    .support-assistant {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      margin-bottom: 1.5rem;
      box-shadow: var(--shadow);
    }

    .support-assistant h4 {
      margin: 0;
      color: var(--success);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    #right h3 {
      margin: 0.25rem 0 0.75rem;
      position: relative;
      padding-bottom: 0.35rem;
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--primary);
    }

    #right h3::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 40px;
      height: 3px;
      background-color: var(--primary);
      border-radius: 2px;
    }

    .discover {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .discover h4 {
      margin: 0.25rem 0;
      font-weight: 600;
    }

    .discover p {
      margin: 0.25rem 0 0.5rem;
      color: var(--text-secondary);
    }

    .discover .insights {
      border-top: 1px dashed var(--border-color);
      padding-top: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.95rem;
      min-height: 2.2em;
      font-style: italic;
    }

    /* Footer Styles */
    footer {
      height: var(--footer-height);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      background-color: var(--card-bg);
      border-top: 1px solid var(--border-color);
      box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
      z-index: 40;
    }

    .footer-status-main {
      font-weight: 600;
      color: var(--primary);
      font-size: 0.94rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Mobile Styles */
    @media (max-width: 1100px) {
      .estate {
        grid-template-columns: 1fr;
        height: calc(100vh - var(--header-height) - var(--footer-height));
        overflow-y: auto;
      }
      
      aside {
        display: none;
      }
      
      header {
        flex-wrap: wrap;
        gap: 0.6rem;
        height: auto;
        min-height: var(--header-height);
        padding: 0.75rem;
      }
      
      .logo {
        width: 100%;
        justify-content: center;
      }
      
      main {
        min-height: calc(100vh - var(--header-height) - var(--footer-height) - 2rem);
      }
    }

    /* Mobile adjustments */
    @media (max-width: 768px) {
      .input-footer {
        flex-direction: column;
        gap: 0.5rem;
        align-items: flex-start;
      }
      
      .mode-indicators {
        align-self: stretch;
        justify-content: space-between;
      }
    }
    
    /* Focus Styles */
    .nav-btn:focus, .action:focus, .toggle:focus, .dashboard:focus, select:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(79, 70, 229, 0.4); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">PMERIT</div>
    <nav>
      <select class="nav-btn" id="lang" aria-label="Language">
        <option value="en">English</option>
        <option value="yo">YorÃ¹bÃ¡</option>
        <option value="ig">Igbo</option>
        <option value="ha">Hausa</option>
      </select>
      <button class="nav-btn" id="pricingBtn">Pricing</button>
      <button class="nav-btn" id="signInBtn">Sign In</button>
      <button class="nav-btn primary" id="startBtn">Start Learning</button>
    </nav>
  </header>

  <div class="estate">
    <aside id="left" aria-label="Quick actions sidebar">
      <section>
        <div class="pane-title">Quick Actions</div>

        <button class="toggle" id="vhToggle">
          <span><i class="fas fa-user-astronaut icon"></i> Virtual Human Mode</span>
          <span class="switch" aria-hidden="true"></span>
        </button>

        <button class="action" id="careerPaths">
          <span><i class="fas fa-compass icon"></i> Career Track & Explore Paths</span>
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>

        <button class="toggle" id="supportToggle">
          <span><i class="fas fa-headset icon"></i> Customer Service Mode</span>
          <span class="switch" aria-hidden="true"></span>
        </button>

        <button class="dashboard guest" id="dashBtn">
          <i class="fas fa-gauge-high"></i> Dashboard
        </button>
      </section>
    </aside>

    <main>
      <section class="panel" aria-label="Chat panel">
        <div class="panel-head">
          <div class="badges">
            <span class="badge vh" id="vhBadge" style="display:none">
              <i class="fas fa-user-astronaut"></i> Virtual Human
            </span>
            <span class="badge support" id="supportBadge" style="display:none">
              <i class="fas fa-headset"></i> Support Assistant
            </span>
          </div>
        </div>

        <div id="textChat" role="region" aria-live="polite">
          <div class="chat-body" id="chatBody">
            <article class="bubble" id="welcomeMsg">
              <div class="ava"><i class="fas fa-user-circle"></i></div>
              <div>
                <h3>PMERIT AI:</h3>
                <p id="welcomeCopy">Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?</p>
              </div>
            </article>
          </div>

          <div class="chat-input-area">
            <div class="input-wrapper">
              <textarea 
                id="chatInput" 
                placeholder="Ask about courses, learning paths, or your goals..."
                maxlength="1000"
                rows="1"
              ></textarea>
              <button id="sendBtn" class="send-btn" disabled>
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
            <div class="input-footer">
              <span class="char-count" id="charCount">0/1000</span>
              <div class="mode-indicators">
                <button id="vhModeBtn" class="mode-btn">
                  <i class="fas fa-user-astronaut"></i> VH Mode
                </button>
                <button id="readAboutBtn" class="mode-btn">
                  <i class="fas fa-book-open"></i> Read About
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <aside id="right" aria-label="Support and discover sidebar">
      <section>
        <div class="support-assistant">
          <h4><i class="fas fa-headset"></i> Support Assistant</h4>
          <p style="color: var(--text-secondary); margin: 0.5rem 0;">Ask me about PMERIT</p>
        </div>

        <h3>Discover Your Path (AI)</h3>
        <div class="discover">
          <h4>Personalized learning plan</h4>
          <p>Start a short flow that blends learning style, interests, and skills into a plan.</p>
          <button class="nav-btn primary" id="beginAssessment">Begin Assessment</button>
          <div class="insights" id="insights">Pro tip: Keep notes in your own words for better recall.</div>
        </div>
      </section>
    </aside>
  </div>

  <footer>
    <span class="footer-status-main">
      <i class="fas fa-signal"></i> Connected to Educational Services
    </span>
  </footer>

  <script>
    // PMERIT Platform JavaScript - Replace Gabriel AI references
    const state = {
      auth: false,
      dark: false,
      vh: false,
      support: false,
      tts: false,
      lang: 'en'
    };

    // Initialize PMERIT namespace
    window.PMERIT = {
      api: {
        assessment: {
          start: async () => {
            // Connect to /functions/api/assessment/start
            console.log('PMERIT Assessment API called');
          }
        },
        ai: {
          chat: async (message) => {
            // Connect to ai.pmerit.com via Workers proxy
            console.log('PMERIT AI chat:', message);
          }
        }
      },
      
      // Virtual Human Mode Toggle Implementation
      initVirtualHumanToggle: function() {
        const vhToggle = document.getElementById('vhToggle');
        const vhBadge = document.getElementById('vhBadge');
        
        vhToggle.addEventListener('click', function() {
          // Toggle state
          state.vh = !state.vh;
          
          // Update visual switch
          this.classList.toggle('active', state.vh);
          
          // Show/hide badge in center panel
          if (state.vh) {
            vhBadge.style.display = 'inline-flex';
            console.log('PMERIT: Virtual Human Mode enabled');
          } else {
            vhBadge.style.display = 'none';
            console.log('PMERIT: Virtual Human Mode disabled');
          }
          
          // Update AI behavior mode
          window.PMERIT.updateAIMode();
        });
      },

      // Career Track & Explore Paths button Implementation
      initCareerPaths: function() {
        const careerPathsBtn = document.getElementById('careerPaths');
        
        careerPathsBtn.addEventListener('click', function() {
          console.log('PMERIT: Career Paths clicked');
          
          // Check if user is authenticated
          if (state.auth) {
            // Authenticated user - go to full career page
            window.location.href = '/career.html';
          } else {
            // Guest user - show career tracks preview
            window.PMERIT.showCareerTracksPreview();
          }
        });
      },
      
      showCareerTracksPreview: function() {
        const chatBody = document.getElementById('chatBody');
        // Add career tracks message to chat
        const careerMsg = document.createElement('article');
        careerMsg.className = 'bubble';
        careerMsg.innerHTML = `
          <div class="ava"><i class="fas fa-compass"></i></div>
          <div>
            <h3>PMERIT AI:</h3>
            <p><strong>Explore Our Career Tracks:</strong></p>
            <p>â€¢ <strong>Software Development</strong> - Build websites, apps, and digital solutions<br/>
            â€¢ <strong>Data Analytics</strong> - Analyze data to drive business insights<br/>
            â€¢ <strong>UI/UX Design</strong> - Create user-friendly interfaces<br/>
            â€¢ <strong>Digital Marketing</strong> - Online marketing and growth strategies<br/>
            â€¢ <strong>Customer Support</strong> - Remote support and customer service</p>
            <p>Ready to find your perfect match? Take our assessment to get personalized recommendations!</p>
          </div>
        `;
        
        chatBody.appendChild(careerMsg);
        chatBody.scrollTop = chatBody.scrollHeight;
      },
      
      // Customer Service Mode Toggle Implementation
      initCustomerServiceToggle: function() {
        const supportToggle = document.getElementById('supportToggle');
        const supportBadge = document.getElementById('supportBadge');
        
        supportToggle.addEventListener('click', function() {
          // Toggle state
          state.support = !state.support;
          
          // Update visual switch
          this.classList.toggle('active', state.support);
          
          // Show/hide badge in center panel
          if (state.support) {
            supportBadge.style.display = 'inline-flex';
            console.log('PMERIT: Customer Service Mode enabled');
          } else {
            supportBadge.style.display = 'none';
            console.log('PMERIT: Customer Service Mode disabled');
          }
          
          // Update AI behavior mode
          window.PMERIT.updateAIMode();
        });
      },
      
      // Dashboard button Implementation
      initDashboardButton: function() {
        const dashBtn = document.getElementById('dashBtn');
        
        dashBtn.addEventListener('click', function() {
          console.log('PMERIT: Dashboard button clicked');
          
          if (state.auth) {
            // Authenticated user - go to dashboard
            window.location.href = '/dashboard.html';
          } else {
            // Guest user - show sign up prompt
            window.PMERIT.showSignUpPrompt();
          }
        });
      },
      
      showSignUpPrompt: function() {
        const chatBody = document.getElementById('chatBody');
        
        // Add sign up prompt to chat
        const signUpMsg = document.createElement('article');
        signUpMsg.className = 'bubble';
        signUpMsg.innerHTML = `
          <div class="ava"><i class="fas fa-user-plus"></i></div>
          <div>
            <h3>PMERIT AI:</h3>
            <p><strong>Create Your Dashboard</strong></p>
            <p>Sign up to access your personalized dashboard with:</p>
            <p>â€¢ Track your learning progress<br/>
            â€¢ View recommended courses<br/>
            â€¢ Manage your career path<br/>
            â€¢ Access certificates and achievements</p>
            <p>Ready to get started? Click "Start Learning" in the top navigation to create your free account!</p>
          </div>
        `;
        
        chatBody.appendChild(signUpMsg);
        chatBody.scrollTop = chatBody.scrollHeight;
        
        // Highlight the Start Learning button briefly
        const startBtn = document.getElementById('startBtn');
        startBtn.style.animation = 'pulse 2s ease-in-out';
        setTimeout(() => {
          startBtn.style.animation = '';
        }, 2000);
      },
      
      // Update AI interaction mode based on current state
      updateAIMode: function() {
        const welcomeCopy = document.getElementById('welcomeCopy');
        
        if (state.support) {
          // Customer Service mode - help-focused interaction
          welcomeCopy.textContent = "Hi! I'm here in Customer Service mode to help with any questions about PMERIT - accounts, courses, technical issues, billing, or platform features. What can I assist you with today?";
        } else if (state.vh) {
          // Virtual Human mode
          welcomeCopy.textContent = "Hi there! I'm your Virtual Human assistant. I can provide visual guidance and more interactive support. How would you like to explore PMERIT today?";
        } else {
          // Standard mode
          welcomeCopy.textContent = "Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?";
        }
      },

      // Chat input functionality
      initializeChatInput: function() {
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const charCount = document.getElementById('charCount');
        const chatBody = document.getElementById('chatBody');

        // Character counter and send button state
        chatInput.addEventListener('input', function() {
          const count = this.value.length;
          charCount.textContent = `${count}/1000`;
          sendBtn.disabled = this.value.trim().length === 0;
          
          // Auto-resize textarea
          this.style.height = 'auto';
          this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Send message function
        function sendMessage() {
          const message = chatInput.value.trim();
          if (!message) return;

          // Add user message to chat
          addMessage('You', message, true);
          
          // Clear input
          chatInput.value = '';
          charCount.textContent = '0/1000';
          sendBtn.disabled = true;
          chatInput.style.height = 'auto';

          // Call PMERIT AI API
          window.PMERIT.api.ai.chat(message).then(response => {
            addMessage('PMERIT AI', response, false);
          }).catch(() => {
            // Fallback response for now
            setTimeout(() => {
              const response = generateAIResponse(message);
              addMessage('PMERIT AI', response, false);
            }, 1000);
          });
        }
        
        // Add message to chat
        function addMessage(sender, text, isUser) {
          const messageEl = document.createElement('article');
          messageEl.className = 'bubble';
          messageEl.innerHTML = `
            <div class="ava">
              <i class="fas ${isUser ? 'fa-user' : 'fa-user-circle'}"></i>
            </div>
            <div>
              <h3>${sender}:</h3>
              <p>${text}</p>
            </div>
          `;
          chatBody.appendChild(messageEl);
          chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Simple AI response generation (until real API is connected)
        function generateAIResponse(userMessage) {
          const lowerMessage = userMessage.toLowerCase();
          
          if (lowerMessage.includes('course') || lowerMessage.includes('learn')) {
            return "I'd be happy to help you explore our courses! We offer programs in Software Development, Data Analytics, UI/UX Design, Digital Marketing, and Customer Support. Would you like to start with our assessment to get personalized recommendations?";
          }
          
          if (lowerMessage.includes('career') || lowerMessage.includes('job')) {
            return "Great question about career opportunities! Our programs are designed to prepare you for remote work and high-demand fields. The assessment can help identify the best career path based on your interests and goals. Ready to discover your path?";
          }
          
          if (lowerMessage.includes('assessment') || lowerMessage.includes('test')) {
            return "The assessment takes just 5-7 minutes and will recommend personalized career tracks for you. It covers your learning style, interests, experience level, and goals. Click 'Begin Assessment' in the right panel to get started!";
          }
          
          if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
            return "I'm here to help! I can assist with information about our courses, career paths, the assessment process, or any questions about PMERIT. You can also toggle 'Customer Service Mode' in the left panel for more detailed support. What would you like to know?";
          }
          
          return "Thanks for your question! I'm here to guide your learning journey with PMERIT. I can help you explore courses, understand career opportunities, or start your assessment. What interests you most?";
        }
        
        // Event listeners
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
          }
        });

        // Mode buttons
        document.getElementById('vhModeBtn').addEventListener('click', function() {
          document.getElementById('vhToggle').click(); // Trigger existing VH toggle
        });

        document.getElementById('readAboutBtn').addEventListener('click', function() {
          addMessage('PMERIT AI', 'Here are some helpful resources: Our platform offers career-focused education in high-demand fields. Check out our Career Paths section or start with the assessment to find your perfect match!', false);
        });
      },
      
      // Initialize application
      init: function() {
        console.log('PMERIT Platform initialized');
        this.bindEvents();
      },
      
      bindEvents: function() {
        // Bind assessment button
        document.getElementById('beginAssessment')?.addEventListener('click', () => {
          console.log('PMERIT Assessment started');
          // TODO: Connect to actual assessment system
        });
        
        // Bind dashboard button  
        document.getElementById('dashBtn')?.addEventListener('click', () => {
          if (state.auth) {
            window.location.href = '/dashboard.html';
          } else {
            // Show sign up modal
            console.log('Guest - show sign up');
          }
        });
        
        // Initialize Virtual Human toggle
        this.initVirtualHumanToggle();
        
        // Initialize Career Paths button
        this.initCareerPaths();
        
        // Initialize Customer Service toggle
        this.initCustomerServiceToggle();
        
        // Initialize Dashboard button
        this.initDashboardButton();

        // Initialize chat input
        this.initializeChatInput();
      }
    };

    // Initialize when DOM loads
    document.addEventListener('DOMContentLoaded', () => {
      window.PMERIT.init();
    });
  </script>
</body>
</html>
