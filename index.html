<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMERIT - Empowering Learning Through Innovation</title>
    <link rel="stylesheet" href="/assets/base.css">
</head>
<body>
    <!-- Load Template Partials -->
    <div id="header-container"></div>
    <div id="nav-container"></div>
    
    <main class="main-layout">
        <!-- Left Panel: Quick Actions -->
        <aside class="left-panel">
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="virtualHumanMode">
                        <span class="slider"></span>
                    </label>
                    <span>Virtual Human Mode</span>
                </div>
                
                <div class="action-item">
                    <button class="action-btn" id="careerTrackBtn">
                        🎯 Career Track & Explore Paths
                    </button>
                </div>
                
                <div class="action-item">
                    <label class="toggle-switch">
                        <input type="checkbox" id="customerServiceMode">
                        <span class="slider"></span>
                    </label>
                    <span>Customer Service Mode</span>
                </div>
            </div>
            
            <div class="settings-section">
                <button class="settings-btn" id="settingsBtn">⚙️ Settings</button>
                <button class="dashboard-btn" id="dashboardBtn">📊 Dashboard</button>
            </div>
        </aside>
        
        <!-- Center Panel: AI Chat Interface -->
        <section class="center-panel">
            <div class="chat-header">
                <div class="ai-avatar">
                    <div class="avatar-circle">🎓</div>
                    <div class="ai-info">
                        <h3>PMERIT AI</h3>
                        <span class="ai-role-badge" id="aiRoleBadge">Receptionist</span>
                    </div>
                </div>
            </div>
            
            <div class="chat-body" id="chatBody">
                <div class="welcome-message">
                    <div class="message ai-message">
                        <div class="message-avatar">🎓</div>
                        <div class="message-content">
                            <strong>PMERIT AI:</strong> Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="chat-input-area">
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="Ask about courses, learning paths, or your goals..."
                        maxlength="1000"
                    ></textarea>
                    <button id="sendBtn" class="send-btn">
                        Send 🚀
                    </button>
                </div>
                <div class="input-footer">
                    <span class="char-count">0/1000</span>
                    <div class="mode-indicators">
                        <button id="vhModeBtn" class="mode-btn">👤 VH Mode</button>
                        <button id="readAboutBtn" class="mode-btn">📚 Read About</button>
                        <span class="connection-status">🟢 Connected to Educational Services</span>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Right Panel: Assessment & Support -->
        <aside class="right-panel">
            <div class="support-assistant">
                <h4>🎯 Support Assistant</h4>
                <p>Ask me about PMERIT</p>
                <div class="support-toggles">
                    <button class="support-toggle active">👤 Virtual Human</button>
                    <button class="support-toggle">🎧 Support</button>
                </div>
            </div>
            
            <div class="assessment-section">
                <h3>Discover Your Path (AI)</h3>
                <div class="assessment-card">
                    <h4>Personalized learning plan</h4>
                    <p>Start a short flow that blends learning style, interests, and skills into a plan.</p>
                    <button class="assessment-btn" id="beginAssessmentBtn">
                        Begin Assessment
                    </button>
                    <p class="tip-text">
                        <em>Relate new concepts to things you already understand for better retention.</em>
                    </p>
                </div>
            </div>
        </aside>
    </main>
    
    <!-- Footer Container -->
    <div id="footer-container"></div>
    
    <!-- Load Template System -->
    <script src="/assets/boot-includes.js"></script>
    <script src="/assets/nav-config.js"></script>
    
    <!-- Page-specific JavaScript -->
    <script>
        // Initialize PMERIT platform
        window.PMERIT = window.PMERIT || {};
        
        // AI Role Management (3 roles: General Assistant, Receptionist, Tutor)
        const AIRoles = {
            RECEPTIONIST: 'Receptionist',
            TUTOR: 'Tutor', 
            ASSISTANT: 'General Assistant'
        };
        
        let currentAIRole = AIRoles.RECEPTIONIST;
        
        // Page initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize template system
            if (window.PMERIT.loadPartials) {
                window.PMERIT.loadPartials();
            }
            
            // Set initial AI role badge
            document.getElementById('aiRoleBadge').textContent = currentAIRole;
            
            // Assessment button handler
            document.getElementById('beginAssessmentBtn').addEventListener('click', function() {
                window.location.href = '/assessment.html';
            });
            
            // Dashboard button handler
            document.getElementById('dashboardBtn').addEventListener('click', function() {
                window.location.href = '/dashboard.html';
            });
            
            // Career track button handler
            document.getElementById('careerTrackBtn').addEventListener('click', function() {
                window.location.href = '/career.html';
            });
            
            // Chat functionality
            initializeChatSystem();
        });
        
        function initializeChatSystem() {
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendBtn');
            const chatBody = document.getElementById('chatBody');
            const charCount = document.querySelector('.char-count');
            
            // Character counter
            chatInput.addEventListener('input', function() {
                const count = this.value.length;
                charCount.textContent = `${count}/1000`;
            });
            
            // Send message handler
            function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;
                
                // Add user message
                addMessage('You', message, true);
                
                // Clear input
                chatInput.value = '';
                charCount.textContent = '0/1000';
                
                // Simulate AI response based on role
                setTimeout(() => {
                    let response = generateAIResponse(message);
                    addMessage('PMERIT AI', response, false);
                }, 1000);
            }
            
            function addMessage(sender, text, isUser) {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
                messageEl.innerHTML = `
                    <div class="message-avatar">${isUser ? '👤' : '🎓'}</div>
                    <div class="message-content">
                        <strong>${sender}:</strong> ${text}
                    </div>
                `;
                chatBody.appendChild(messageEl);
                chatBody.scrollTop = chatBody.scrollHeight;
            }
            
            function generateAIResponse(userMessage) {
                const lowerMessage = userMessage.toLowerCase();
                
                // Receptionist role responses
                if (currentAIRole === AIRoles.RECEPTIONIST) {
                    if (lowerMessage.includes('career') || lowerMessage.includes('job')) {
                        return "I'd recommend exploring our Career Paths section to see opportunities in tech, data analytics, and digital marketing. Would you like to start with our assessment to find your best fit?";
                    }
                    if (lowerMessage.includes('course') || lowerMessage.includes('learn')) {
                        return "Great! We have courses in software development, data analytics, UI/UX design, and more. Let me guide you to our course catalog, or you can start with the assessment to get personalized recommendations.";
                    }
                    if (lowerMessage.includes('assessment') || lowerMessage.includes('test')) {
                        return "Our assessment takes just 5-7 minutes and will recommend the best career tracks for you. Ready to discover your path? Click 'Begin Assessment' to start!";
                    }
                    return "I'm here to help you navigate PMERIT! I can guide you to our assessment, course catalog, career paths, or answer questions about the platform. What interests you most?";
                }
                
                // Default response
                return "Thanks for your question! I'm here to help you succeed with PMERIT. How can I assist with your learning journey today?";
            }
            
            // Event listeners
            sendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }
    </script>
</body>
</html>
