<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PMERIT — Accessible Global Education</title>

  <!-- Icons & Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

  <!--
    PMERIT Home — Auth-aware Dashboard button + Sign Up modal
    - Guests: clicking Dashboard opens Sign Up modal.
    - Signed-in: clicking Dashboard goes to dashboard.html.
    - Guests never see Profile/Assessments/Subjects/Progress on Home.
    - White, airy baseline. Non-scrollable desktop layout with header/footer bounds.
  -->
  <style>
    :root{
      --brand:#2563EB;        /* global blue */
      --accent:#7C3AED;       /* purple accent */
      --ok:#16A34A;           /* green */
      --ink:#0f172a;
      --muted:#64748b;
      --bg:#ffffff;
      --bg2:#f8fafc;
      --card:#ffffff;
      --border:#e2e8f0;
      --shadow:0 6px 24px rgba(2,6,23,.08);
      --trans:all .22s cubic-bezier(.4,0,.2,1);
      --header-h:74px;
      --footer-h:52px;
    }

    /* Dark mode vars */
    .dark{
      --bg:#0f172a; --bg2:#111827; --card:#111827;
      --ink:#e5e7eb; --muted:#9ca3af; --border:#334155;
      --shadow:0 8px 28px rgba(0,0,0,.45);
    }

    html,body{height:100%;margin:0}
    body{
      background:var(--bg); color:var(--ink);
      font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;
      overflow:hidden; display:flex; flex-direction:column;
    }

    /* Header */
    header{
      height:var(--header-h); flex:0 0 auto;
      display:flex; align-items:center; justify-content:space-between;
      padding:.75rem 1rem; background:var(--bg2); box-shadow:var(--shadow);
      z-index:5;
    }
    .logo{font-weight:800; letter-spacing:.2px; color:var(--brand); font-size:1.25rem}
    .logo span{color:var(--ok)}
    nav{display:flex; gap:.5rem; align-items:center; flex-wrap:wrap}
    select,.btn{border:1px solid var(--border); background:#fff; color:var(--ink);
      padding:.55rem .8rem; border-radius:999px; min-height:44px; font-weight:600;
      cursor:pointer; transition:var(--trans)}
    .btn:hover,select:hover{border-color:var(--brand)}
    .btn.primary{background:var(--brand); color:#fff; border-color:var(--brand)}
    .btn.primary:hover{filter:brightness(.97)}
    .btn.ghost{background:transparent}
    .btn.accent{background:var(--accent); color:#fff; border-color:var(--accent)}

    /* Estate grid */
    .estate{
      flex:1 1 auto; height:calc(100vh - var(--header-h) - var(--footer-h));
      display:grid; grid-template-columns:280px minmax(560px,1fr) 340px;
      overflow:hidden; gap:0;
    }
    aside, main{height:100%; overflow-y:auto; background:var(--bg)}
    #left{background:var(--bg2); border-right:1px solid var(--border)}
    #right{background:var(--bg2); border-left:1px solid var(--border)}

    /* Left pane */
    #left section{padding:1rem; display:flex; flex-direction:column; gap:.85rem}
    .pane-title{font-weight:800; color:var(--brand)}
    .toggle,.action,.dashboard{
      display:flex; align-items:center; justify-content:space-between; gap:.75rem;
      background:var(--card); color:var(--ink);
      border:1px solid var(--border); border-radius:.75rem; padding:.7rem .9rem;
      cursor:pointer; transition:var(--trans); min-height:44px;
    }
    .toggle:hover,.action:hover,.dashboard:hover{border-color:var(--brand)}
    .icon{color:var(--brand); margin-right:.45rem}
    .switch{width:42px; height:22px; background:#cbd5e1; border-radius:999px; position:relative}
    .switch::after{content:""; position:absolute; left:2px; top:2px; width:18px; height:18px; background:#fff; border-radius:999px; transition:var(--trans)}
    .toggle.active .switch{background:var(--brand)}
    .toggle.active .switch::after{left:22px}
    .dashboard{justify-content:center; font-weight:800; background:var(--brand); color:#fff; box-shadow:var(--shadow)}
    .dashboard.guest{background:#64748b}

    .collapsible{border:1px solid var(--border); border-radius:.9rem; overflow:hidden; background:var(--card)}
    .collapsible .head{display:flex; align-items:center; justify-content:space-between; padding:.75rem .9rem; cursor:pointer; background:var(--bg)}
    .collapsible .body{display:none; padding:.75rem .9rem; background:var(--card); border-top:1px solid var(--border)}

    .avatar{display:none; place-items:center; width:96px; height:96px; border-radius:999px;
      background:linear-gradient(135deg,var(--brand),var(--ok)); color:#fff; margin:.25rem auto 0; border:3px solid var(--border)}
    .avatar.active{display:grid}

    /* Center panel (chat) */
    .panel{height:100%; display:flex; flex-direction:column; background:var(--card);
      border:1px solid var(--border); border-radius:1rem; margin:1rem; box-shadow:var(--shadow); overflow:hidden}
    .panel-head{flex:0 0 auto; padding:1rem; border-bottom:1px solid var(--border); background:var(--bg2);
      display:flex; gap:.5rem; align-items:center}
    .badges{display:flex; gap:.4rem; flex-wrap:wrap}
    .badge{background:var(--brand); color:#fff; font-size:.78rem; padding:.28rem .6rem; border-radius:999px; display:inline-flex; gap:.35rem; align-items:center}
    .badge.support{background:var(--ok)}
    .badge.vh{background:var(--accent)}

    #textChat{display:flex; flex-direction:column; height:100%}
    .chat-body{flex:1 1 auto; padding:1rem; overflow:auto; display:flex; flex-direction:column; gap:.9rem}
    .bubble{display:flex; gap:.65rem; align-items:flex-start; background:rgba(37,99,235,.06); border:1px solid rgba(37,99,235,.18); border-radius:.75rem; padding:1rem}
    .ava{min-width:36px; height:36px; border-radius:999px; display:grid; place-items:center; color:#fff;
      background:linear-gradient(135deg,var(--brand),var(--ok))}
    .bubble h3{margin:.1rem 0 .35rem; color:var(--brand); font-size:1rem}
    .bubble p{margin:.3rem 0; line-height:1.55}

    .chat-input{flex:0 0 auto; border-top:1px solid var(--border); background:var(--bg2); padding:.75rem}
    textarea{width:100%; min-height:80px; resize:none; background:var(--bg); color:var(--ink);
      border:1px solid var(--border); border-radius:.65rem; padding:.7rem}
    textarea:focus{outline:none; box-shadow:0 0 0 3px rgba(37,99,235,.18); border-color:var(--brand)}
    .input-bar{display:flex; align-items:center; justify-content:space-between; margin-top:.45rem; gap:.5rem}
    .count{font-size:.92rem; color:var(--muted)}
    .send{border:none; background:var(--brand); color:#fff; padding:.55rem 1rem; border-radius:.55rem; font-weight:800; cursor:pointer}

    /* Virtual Human stage (hidden by default) */
    #vhStage{display:none; flex-direction:column; height:100%}
    .stage{flex:1 1 auto; display:grid; place-items:center; padding:1rem}
    .human-frame{width:min(700px,92%); height:min(420px,55vh); border:2px solid var(--brand); border-radius:1rem; box-shadow:var(--shadow);
      background:linear-gradient(135deg,#e2e8f0,#f8fafc); display:grid; place-items:center}
    .human-face{width:120px; height:120px; border-radius:999px; background:linear-gradient(135deg,var(--brand),var(--ok));
      color:#fff; display:grid; place-items:center; font-size:3rem; border:4px solid #fff}
    .captions{border-top:1px solid var(--border); background:var(--bg2); padding:.75rem 1rem; color:var(--muted)}

    /* Right pane */
    #right section{padding:1rem}
    .support-assistant{background:var(--card); border:1px solid var(--border); border-radius:1rem; padding:1rem; text-align:center; margin-bottom:1rem}
    .support-assistant h4{margin:0; color:var(--ok)}
    #right h3{margin:.25rem 0 .75rem; position:relative; padding-bottom:.35rem}
    #right h3::after{content:""; position:absolute; left:0; bottom:0; width:48px; height:3px; background:var(--brand); border-radius:2px}
    .cards{display:grid; gap:.6rem}
    .card{background:var(--card); border:1px solid var(--border); border-left:4px solid var(--brand);
      border-radius:.8rem; padding:.9rem; box-shadow:var(--shadow)}
    .card:nth-of-type(2){border-left-color:var(--ok)}
    .card:nth-of-type(3){border-left-color:var(--accent)}
    .card h4{margin:.1rem 0 .35rem; display:flex; align-items:center; gap:.5rem}
    .card p{margin:0 0 .6rem; color:var(--muted); font-size:.95rem}
    .cta{width:100%; border:none; border-radius:.55rem; padding:.55rem .8rem; background:var(--brand); color:#fff; font-weight:800; min-height:44px}

    /* Footer */
    footer{
      position:fixed; bottom:0; left:0; width:100%; height:var(--footer-h);
      border-top:1px solid var(--border); background:var(--bg2); display:flex; align-items:center; justify-content:center; gap:1rem; padding:.5rem .75rem; z-index:5
    }
    .footer-status{font-weight:700; color:var(--brand); font-size:.94rem}

    /* Mobile */
    @media (max-width:1100px){
      :root{ --header-h:80px; --footer-h:60px }
      .estate{grid-template-columns:1fr; height:calc(100vh - var(--header-h) - var(--footer-h)); overflow-y:auto}
      header{flex-wrap:wrap; gap:.6rem}
      .logo{width:100%; text-align:center}
      aside#left, aside#right{display:none}
      main{min-height:calc(100vh - var(--header-h) - var(--footer-h) - 2rem)}
      #page2{padding-bottom:64px}
    }

    /* Focus */
    .btn:focus,.action:focus,.toggle:focus,.dashboard:focus,.cta:focus,textarea:focus,select:focus{outline:2px dashed var(--brand); outline-offset:2px}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">P<span>MERIT</span></div>
    <nav>
      <select id="lang">
        <option value="en">English</option>
        <option value="yo">Yorùbá</option>
        <option value="ig">Igbo</option>
        <option value="ha">Hausa</option>
      </select>
      <button class="btn" id="donateBtn">Donate</button>
      <button class="btn" id="signInBtn">Sign In</button>
      <button class="btn primary" id="startBtn">Start Learning</button>
    </nav>
  </header>

  <div class="estate">
    <!-- Left Pane -->
    <aside id="left">
      <section>
        <div class="pane-title">Quick Actions</div>

        <button class="toggle" id="vhToggle">
          <span><i class="fas fa-user icon"></i> Virtual Human Mode</span>
          <span class="switch"></span>
        </button>

        <button class="action" id="careerPaths">
          <span><i class="fas fa-compass icon"></i> Career Track & Explore Paths</span>
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>

        <button class="toggle" id="supportToggle">
          <span><i class="fas fa-headset icon"></i> Customer Service Mode</span>
          <span class="switch"></span>
        </button>

        <div class="collapsible" id="settingsBox">
          <div class="head">
            <strong><i class="fas fa-sliders-h"></i> Settings</strong>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="body">
            <button class="toggle" id="darkToggle">
              <span><i class="fas fa-moon icon"></i> Dark Mode</span>
              <span class="switch"></span>
            </button>
            <button class="toggle" id="ttsToggle">
              <span><i class="fas fa-volume-up icon"></i> Text-to-Speech</span>
              <span class="switch"></span>
            </button>
            <button class="action" id="voicesBtn">
              <span><i class="fas fa-headphones icon"></i> Preview Voices</span>
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>

        <!-- Single Dashboard button per spec -->
        <button class="dashboard guest" id="dashBtn"><i class="fas fa-gauge-high"></i>&nbsp;Dashboard</button>

        <div class="avatar" id="vhAvatar" title="Virtual Human">
          <i class="fas fa-user-circle" aria-hidden="true"></i>
        </div>
      </section>
    </aside>

    <!-- Center -->
    <main>
      <section id="page2" class="panel">
        <div class="panel-head">
          <div class="badges">
            <span class="badge vh" id="vhBadge" style="display:none"><i class="fas fa-user-astronaut"></i> Virtual Human</span>
            <span class="badge support" id="supportBadge" style="display:none"><i class="fas fa-headset"></i> Support Assistant</span>
          </div>
        </div>

        <div id="textChat">
          <div class="chat-body" id="chatBody">
            <article class="bubble" id="welcomeMsg">
              <div class="ava"><i class="fas fa-user-circle"></i></div>
              <div>
                <h3>PMERIT AI:</h3>
                <p>Welcome to PMERIT! I'm here to guide your learning journey. Our mission is to provide accessible, high-quality education that opens doors to endless opportunities. How can I help you discover your potential today?</p>
              </div>
            </article>
          </div>
          <div class="chat-input">
            <textarea id="chatInput" maxlength="1000" placeholder="Ask about courses, learning paths, or your goals..."></textarea>
            <div class="input-bar">
              <span class="count" id="count">0/1000</span>
              <div style="display:flex;gap:.5rem;align-items:center">
                <button class="btn ghost" id="vhQuick"><i class="fas fa-user-astronaut"></i> VH Mode</button>
                <button class="btn ghost" id="readAbout"><i class="fas fa-book"></i> Read</button>
                <span class="footer-status" id="status"><i class="fas fa-circle-check"></i> Connected to Educational Services</span>
              </div>
              <button class="send" id="sendBtn"><span>Send</span> <i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </div>

        <!-- Virtual Human stage -->
        <div id="vhStage" class="hidden">
          <div class="stage">
            <div class="human-frame">
              <div class="human-face"><i class="fas fa-user-circle"></i></div>
            </div>
          </div>
          <div class="captions" id="captions">Virtual Human is speaking…</div>
        </div>
      </section>
    </main>

    <!-- Right Pane -->
    <aside id="right">
      <section>
        <div class="support-assistant" id="supportBox">
          <h4><i class="fas fa-headset"></i> Support Assistant</h4>
          <p class="muted">Ask me about PMERIT</p>
          <div style="display:flex;gap:.5rem;justify-content:center;margin-top:.5rem">
            <button class="btn ghost" style="border-color:var(--accent)"><i class="fas fa-user-astronaut"></i> Virtual Human</button>
            <button class="btn ghost" style="border-color:var(--ok)"><i class="fas fa-headset"></i> Support</button>
          </div>
        </div>

        <h3>Discover Your Path</h3>
        <div class="cards">
          <div class="card">
            <h4><i class="fas fa-graduation-cap"></i> Learning Style Assessment</h4>
            <p>Find how you learn best and personalize your experience.</p>
            <button class="cta" data-link="#todo-assess">Start Assessment</button>
          </div>
          <div class="card">
            <h4><i class="fas fa-lightbulb"></i> Interest Profiler</h4>
            <p>Explore subjects and fields that match your interests.</p>
            <button class="cta" data-link="#todo-interest">Discover Interests</button>
          </div>
          <div class="card">
            <h4><i class="fas fa-bolt"></i> Skills Assessment</h4>
            <p>Assess your abilities and identify growth opportunities.</p>
            <button class="cta" data-link="#todo-skills">Evaluate Skills</button>
          </div>
        </div>
      </section>
    </aside>
  </div>

  <!-- Footer -->
  <footer>
    <span class="footer-status"><i class="fas fa-signal"></i> Connected to Educational Services</span>
    <a class="btn ghost" href="#privacy">Privacy & Terms</a>
    <a class="btn ghost" href="#contact">Contact</a>
    <a class="btn ghost" href="#partners">Partnerships</a>
    <a class="btn ghost" href="#support">Support</a>
  </footer>

  <!-- Modals -->
  <dialog id="signUpModal" style="border:none;border-radius:12px;max-width:560px;width:92%;box-shadow:var(--shadow);background:var(--card);color:var(--ink)">
    <form method="dialog" style="margin:0;padding:1rem 1rem 1.1rem">
      <h3 style="margin:.25rem 0 1rem;color:var(--brand);display:flex;gap:.5rem;align-items:center"><i class="fas fa-user-plus"></i> Create your PMERIT account</h3>
      <label style="display:grid;gap:.4rem;margin-bottom:.6rem">
        <span>Full name</span>
        <input id="su_name" required placeholder="Your name" style="padding:.65rem;border:1px solid var(--border);border-radius:.65rem;background:var(--bg);color:var(--ink)"/>
      </label>
      <label style="display:grid;gap:.4rem;margin-bottom:.6rem">
        <span>Email</span>
        <input id="su_email" type="email" required placeholder="you@example.com" style="padding:.65rem;border:1px solid var(--border);border-radius:.65rem;background:var(--bg);color:var(--ink)"/>
      </label>
      <label style="display:grid;gap:.4rem">
        <span>Password</span>
        <input id="su_pwd" type="password" required placeholder="••••••••" style="padding:.65rem;border:1px solid var(--border);border-radius:.65rem;background:var(--bg);color:var(--ink)"/>
      </label>
      <p style="font-size:.92rem;color:var(--muted);margin:.75rem 0 0">By continuing you agree to our terms.</p>
      <div style="display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem">
        <button class="btn" value="cancel">Cancel</button>
        <button class="btn primary" id="signUpCreate" type="button">Create account</button>
      </div>
    </form>
  </dialog>

  <dialog id="voicesModal" style="border:none;border-radius:12px;max-width:640px;width:92%;box-shadow:var(--shadow);background:var(--card);color:var(--ink)">
    <form method="dialog" style="margin:0;padding:1rem 1.1rem">
      <h3 style="margin:.25rem 0 1rem;color:var(--brand);display:flex;gap:.5rem;align-items:center"><i class="fas fa-headphones"></i> Voice Sampler</h3>
      <label style="display:grid;gap:.35rem">
        <span>Sample text</span>
        <textarea id="voiceText" rows="3" style="border:1px solid var(--border);border-radius:.65rem;padding:.6rem">Welcome to PMERIT. Empowering learning through innovation.</textarea>
      </label>
      <div style="display:flex;justify-content:space-between;gap:.5rem;margin-top:1rem">
        <button class="btn" id="browserTts" type="button">Browser TTS (fallback)</button>
        <button class="btn" value="cancel">Close</button>
      </div>
    </form>
  </dialog>

  <!-- Scripts -->
  <script>
    const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
    const body=document.body;
    const state={auth:false,dark:false,vh:false,support:false,tts:false};

    // Elements
    const settingsBox=$('#settingsBox'), settingsHead=settingsBox.querySelector('.head'), settingsBody=settingsBox.querySelector('.body');
    const dashBtn=$('#dashBtn'), signInBtn=$('#signInBtn'), startBtn=$('#startBtn'), donateBtn=$('#donateBtn');
    const vhToggle=$('#vhToggle'), vhAvatar=$('#vhAvatar'), vhBadge=$('#vhBadge'), vhStage=$('#vhStage'), textChat=$('#textChat');
    const supportToggle=$('#supportToggle'), supportBadge=$('#supportBadge');
    const ttsToggle=$('#ttsToggle'), chatInput=$('#chatInput'), count=$('#count'), sendBtn=$('#sendBtn'), chatBody=$('#chatBody');
    const voicesBtn=$('#voicesBtn'), voicesDlg=$('#voicesModal'), browserTtsBtn=$('#browserTts'), voiceText=$('#voiceText');
    const careerPaths=$('#careerPaths');
    const signUpModal=$('#signUpModal'), signUpCreate=$('#signUpCreate');

    // Init persisted flags
    function initState(){
      try{
        state.dark = localStorage.getItem('pmerit_dark')==='true';
        state.auth = localStorage.getItem('pmerit_auth')==='true';
        state.tts  = localStorage.getItem('pmerit_tts')==='true';
      }catch{}
      body.classList.toggle('dark', state.dark);
      if(state.dark) $('#darkToggle').classList.add('active');
      if(state.tts)  $('#ttsToggle').classList.add('active');
      updateDashboardVisual();
    }
    function save(k,v){try{localStorage.setItem(k,String(v));}catch{}}

    // UI Behaviors
    settingsHead.addEventListener('click',()=>{
      const open=settingsBody.style.display==='block';
      settingsBody.style.display=open?'none':'block';
      settingsHead.querySelector('i.fas').className=open?'fas fa-sliders-h':'fas fa-chevron-down';
    });

    $('#darkToggle').addEventListener('click',()=>{
      $('#darkToggle').classList.toggle('active');
      state.dark = $('#darkToggle').classList.contains('active');
      body.classList.toggle('dark', state.dark);
      save('pmerit_dark', state.dark);
    });

    ttsToggle.addEventListener('click',()=>{
      ttsToggle.classList.toggle('active');
      state.tts = ttsToggle.classList.contains('active');
      save('pmerit_tts', state.tts);
      if(!state.tts && 'speechSynthesis' in window) speechSynthesis.cancel();
    });

    supportToggle.addEventListener('click',()=>{
      supportToggle.classList.toggle('active');
      state.support = supportToggle.classList.contains('active');
      supportBadge.style.display = state.support ? 'inline-flex' : 'none';
    });

    vhToggle.addEventListener('click',()=>{
      vhToggle.classList.toggle('active');
      state.vh = vhToggle.classList.contains('active');
      if(state.vh){
        textChat.style.display='none';
        vhStage.style.display='flex';
        vhAvatar.classList.add('active');
        vhBadge.style.display='inline-flex';
      }else{
        vhStage.style.display='none';
        textChat.style.display='flex';
        vhAvatar.classList.remove('active');
        vhBadge.style.display='none';
      }
    });

    // Dashboard routing per auth
    function updateDashboardVisual(){
      dashBtn.classList.toggle('guest', !state.auth);
    }
    dashBtn.addEventListener('click',()=>{
      if(state.auth){ window.location.href='dashboard.html'; }
      else{
        if(typeof signUpModal.showModal==='function'){ signUpModal.showModal(); }
        else{ alert('Please sign up to access your dashboard.'); }
      }
    });

    // Simple demo Sign In toggler (you can replace with real auth later)
    signInBtn.addEventListener('click',()=>{
      state.auth = !state.auth;
      save('pmerit_auth', state.auth);
      updateDashboardVisual();
      alert(state.auth ? 'Signed in (demo). Dashboard enabled.' : 'Signed out.');
    });

    // Sign Up modal create account → set auth=true and go
    signUpCreate.addEventListener('click',()=>{
      const name=$('#su_name').value.trim(), email=$('#su_email').value.trim(), pwd=$('#su_pwd').value.trim();
      if(!name || !email || !pwd){ alert('Please complete all fields.'); return; }
      state.auth=true; save('pmerit_auth', true);
      signUpModal.close();
      window.location.href='dashboard.html';
    });

    // Chat
    chatInput.addEventListener('input',()=>{count.textContent=(chatInput.value||'').length+'/1000';});
    sendBtn.addEventListener('click',()=>{
      const text=(chatInput.value||'').trim(); if(!text) return;
      $('#welcomeMsg')?.remove();
      const me=document.createElement('article');
      me.className='bubble';
      me.innerHTML='<div class="ava" style="background:#4f46e5"><i class="fas fa-user"></i></div><div><h3>You</h3><p></p></div>';
      me.querySelector('p').textContent=text;
      chatBody.appendChild(me); chatBody.scrollTop=chatBody.scrollHeight;

      setTimeout(()=>{
        const reply = state.support ? "Thanks for reaching out. A support assistant will help shortly."
                                    : "Based on your goals, consider the UI/UX Design track. Want details?";
        const ai=document.createElement('article');
        ai.className='bubble';
        ai.innerHTML='<div class="ava"><i class="fas fa-user-circle"></i></div><div><h3>PMERIT AI:</h3><p></p></div>';
        ai.querySelector('p').textContent=reply;
        chatBody.appendChild(ai); chatBody.scrollTop=chatBody.scrollHeight;
        if(state.tts && 'speechSynthesis' in window){ const u=new SpeechSynthesisUtterance(reply); speechSynthesis.speak(u); }
      },600);

      chatInput.value=''; count.textContent='0/1000';
    });

    // Voices dialog (browser TTS)
    voicesBtn.addEventListener('click',()=>{
      if(typeof voicesDlg.showModal==='function'){ voicesDlg.showModal(); }
      else{ alert('Voice sampler requires a modern browser.'); }
    });
    browserTtsBtn.addEventListener('click',()=>{
      const t=(voiceText.value||'').trim();
      if(!t) return; if(!('speechSynthesis' in window)) { alert('Browser TTS not supported.'); return; }
      speechSynthesis.cancel(); speechSynthesis.speak(new SpeechSynthesisUtterance(t));
    });

    // Career tracks placeholder
    careerPaths.addEventListener('click',()=>alert('Tracks:\n• Software Development (Full-stack)\n• Data Analytics\n• UI/UX Design\n• Digital Marketing\n• Customer Support (Remote)\n• Virtual Assistance / Operations\n• Cloud & DevOps (Intro)'));

    // Misc
    startBtn.addEventListener('click',()=>alert('Starting learning journey…'));
    donateBtn.addEventListener('click',()=>alert('Thanks for supporting PMERIT!'));

    // Kick
    initState();
  </script>
</body>
</html>
